(this["webpackJsonplarvaio-cloud-device-react-demo"]=this["webpackJsonplarvaio-cloud-device-react-demo"]||[]).push([[7],{39:function(e,t,n){var r={"./lar-analog-value.entry.js":[49,32],"./lar-app.entry.js":[50,33],"./lar-area-troubles.entry.js":[51,0,1,5,4,17],"./lar-area.entry.js":[52,0,1,4,15],"./lar-backdrop_14.entry.js":[53,0,1,5,4,13],"./lar-button-push.entry.js":[54,34],"./lar-debug.entry.js":[55,35],"./lar-door.entry.js":[56,36],"./lar-inner-range-area.entry.js":[57,37],"./lar-inner-range-door.entry.js":[58,38],"./lar-onoff.entry.js":[59,39],"./lar-push-button.entry.js":[60,40],"./lar-radio-button.entry.js":[61,16],"./lar-range.entry.js":[62,41],"./lar-rtsp-h264-mjpeg.entry.js":[160,12],"./lar-slider.entry.js":[63,27],"./lar-sliding-door.entry.js":[64,0,14],"./lar-toggle.entry.js":[65,21],"./lar-two-pos-controller.entry.js":[66,18],"./lar-utility-log.entry.js":[67,0,1,28],"./lar-utility-meter.entry.js":[68,0,1,5,19]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=39,e.exports=o},41:function(e,t,n){var r={"./24h non-burgular.svg":69,"./airflow.svg":70,"./alarm.svg":71,"./back.svg":72,"./barrier.svg":73,"./carbonmonoxide.svg":74,"./chart-bar.svg":75,"./chart-bar2.svg":76,"./check.svg":77,"./cloud.svg":78,"./combustion.svg":79,"./device.svg":80,"./door.svg":81,"./dot-circle.svg":82,"./down.svg":83,"./electricity.svg":84,"./fail to report in.svg":85,"./fire.svg":86,"./fire_alarm.svg":87,"./flame.svg":88,"./foil.svg":89,"./gas.svg":90,"./glass.svg":91,"./halflock.svg":92,"./halflock_trouble.svg":93,"./hight temp.svg":94,"./info.svg":95,"./intruder_alarm.svg":96,"./loading.svg":97,"./lock.svg":98,"./lock2.svg":99,"./lock_trouble.svg":100,"./log.svg":101,"./low temp.svg":102,"./medical.svg":103,"./medical_alarm.svg":104,"./movement.svg":105,"./moving-cogs.svg":106,"./off.svg":107,"./on.svg":108,"./other_alarm.svg":109,"./panic.svg":110,"./panic_alarm.svg":111,"./perimeter.svg":112,"./personal emergency.svg":113,"./refrigeration.svg":114,"./security.svg":115,"./security2.svg":116,"./services.svg":117,"./sliding-door.svg":118,"./smoke.svg":119,"./solid-circle.svg":120,"./sound.svg":121,"./tank level.svg":122,"./temperature.svg":123,"./unlock.svg":124,"./unlock2.svg":125,"./user.svg":126,"./users.svg":127,"./vibration.svg":128,"./warning.svg":129,"./water.svg":130,"./water2.svg":131,"./window.svg":132};function o(e){return a(e).then(n)}function a(e){return n.e(9).then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}o.keys=function(){return Object.keys(r)},o.resolve=a,o.id=41,e.exports=o},42:function(e,t,n){var r={"./lar-cognito-button_5.entry.js":[134,29],"./lar-cognito-config.entry.js":[135,3,30],"./lar-cognito-login.entry.js":[136,3,22],"./lar-cognito-password-recovery_2.entry.js":[137,3,23]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=42,e.exports=o},44:function(e,t,n){var r={"./1x1/ch.svg":138,"./1x1/dk.svg":139,"./1x1/ee.svg":140,"./1x1/fi.svg":141,"./1x1/il.svg":142,"./1x1/it.svg":143,"./1x1/lt.svg":144,"./1x1/lv.svg":145,"./1x1/pl.svg":146,"./1x1/ru.svg":147,"./1x1/se.svg":148,"./4x3/ch.svg":149,"./4x3/dk.svg":150,"./4x3/ee.svg":151,"./4x3/fi.svg":152,"./4x3/il.svg":153,"./4x3/it.svg":154,"./4x3/lt.svg":155,"./4x3/lv.svg":156,"./4x3/pl.svg":157,"./4x3/ru.svg":158,"./4x3/se.svg":159};function o(e){return a(e).then(n)}function a(e){return n.e(11).then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}))}o.keys=function(){return Object.keys(r)},o.resolve=a,o.id=44,e.exports=o},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r),a=n(21),i=n.n(a),s=n(18),c=n(17),u=n(0),l=n.n(u),v=n(1),d=n(6),g=n(7),p=n(5),f=n(8),h=n(9),b=(n(45),n(2)),j=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).state={loading:!1},r.onLoading=r.onLoading.bind(Object(p.a)(r)),r.onLoginError=r.onLoginError.bind(Object(p.a)(r)),r.onLoginDone=r.onLoginDone.bind(Object(p.a)(r)),r}return Object(g.a)(n,[{key:"onLoginError",value:function(e){alert(e.detail)}},{key:"onLoginDone",value:function(){var e=this.props.onLoginDone;e()}},{key:"onLoading",value:function(e){this.setState({loading:!!e.detail})}},{key:"render",value:function(){var e=this.state.loading?Object(b.jsx)("div",{children:"Loading..."}):Object(b.jsx)("span",{});return Object(b.jsxs)("div",{children:[e,Object(b.jsx)(c.b,{cognitoUsernameAttribute:"email",onLoading:this.onLoading,onLoginDone:this.onLoginDone,onLoginError:this.onLoginError})]})}}]),n}(r.Component),m=n(28),y=n(33),O=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;Object(d.a)(this,n),(r=t.call(this,e)).state={loading:!0,closed:!1,nodes:[]};var o=e.deviceId,a=e.getToken,i=e.unitId;return r.device=new y.a(o,i,a,{server:"wss://broker.larva.io",timeout:8e3}),r.deviceClosed=r.deviceClosed.bind(Object(p.a)(r)),r.createReactComponent=r.createReactComponent.bind(Object(p.a)(r)),r.device.addEventListener("broadcast",n.handleBroadcast),r.device.addEventListener("close",r.deviceClosed),r}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.device.open();case 3:return e.next=5,this.device.getUINodes();case 5:t=e.sent,this.setState({nodes:t,closed:!1,loading:!1}),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,this.device.close();case 13:alert("Failed to connect to device: ".concat(e.t0.message));case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.device.removeEventListener("broadcast",n.handleBroadcast),this.device.removeEventListener("close",this.deviceClosed),e.next=4,this.device.close();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deviceClosed",value:function(){var e=Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!1,closed:!0,nodes:[]});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createReactComponent",value:function(e){if(!e||!e.ui||!e.node||!e.component)throw new Error("Invalid node object");return o.a.createElement(e.component,{color:"primary",colorInputs:"primary",colorModal:"primary",mainTitle:e.ui.name,supTitle:e.ui.room?e.ui.room.name:"",subTitle:e.ui.category?e.ui.category.name:"",icon:e.ui.icon,nodeId:e.node.id,key:e.node.id,log:e.ui.log,onOutput:this.device.handleNodeOutput,onRequest:this.device.handleNodeRequest})}},{key:"render",value:function(){var e=this.state,t=e.loading,r=e.nodes,o=e.closed,a=t?Object(b.jsx)("div",{children:"Loading..."}):Object(b.jsx)("span",{}),i=o?Object(b.jsx)("div",{children:"Device connection closed"}):Object(b.jsx)("span",{}),c=r.filter((function(e){return!!e.ui.visible})).sort((function(e,t){return parseInt(t.ui.rating,10)-parseInt(e.ui.rating,10)})).map((function(e){var t=n.pascalize(e.node.type);return"undefined"===typeof s[t]?(console.error("Cannot find Larva.io WebComonent for ".concat(t)),e):Object(m.a)(Object(m.a)({},e),{},{component:s[t]})})).filter((function(e){return!!e.component})),u=c.filter((function(e){return!e.ui.favorite})).map(this.createReactComponent),l=c.filter((function(e){return!!e.ui.favorite})).map(this.createReactComponent);return Object(b.jsxs)("div",{children:[a,i,Object(b.jsxs)(s.LarApp,{children:[Object(b.jsx)("div",{className:"favorites-grid",children:l}),Object(b.jsx)("div",{className:"grid",children:u})]})]})}}],[{key:"pascalize",value:function(e){var t=e.replace(/-./g,(function(e){return e.toUpperCase()[1]}));return t.charAt(0).toUpperCase()+t.slice(1)}},{key:"handleBroadcast",value:function(){var e=Object(v.a)(l.a.mark((function e(t){var n,r,o,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t&&t.detail?t.detail:{},r=n.evt,o=n.payload||{},r){e.next=5;break}return e.abrupt("return");case 5:(a=document.querySelector("*[node-id='".concat(r,"']")))&&a.input(o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(r.Component),x=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var o;return Object(d.a)(this,n),(o=t.call(this,e)).Cognito=Object(r.createRef)(),o.state={loggedIn:!1},o.logout=o.logout.bind(Object(p.a)(o)),o.changeLoggedInState=o.changeLoggedInState.bind(Object(p.a)(o)),o.getToken=o.getToken.bind(Object(p.a)(o)),o}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.c)();case 2:this.changeLoggedInState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getToken",value:function(){var e=Object(v.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cognito.current.getAccessToken();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(v.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cognito.current.logout();case 2:this.changeLoggedInState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeLoggedInState",value:function(){var e=Object(v.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.Cognito.current.getAccessToken();case 3:t=e.sent,this.setState({loggedIn:!!t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.loggedIn?Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{type:"button",onClick:this.logout,children:"Logout"}),Object(b.jsx)(O,{deviceId:"af88a67d-39f7-4fc0-adaa-2b97c633cac9",unitId:"0657b857-2532-4d32-826d-508834b88196",getToken:this.getToken})]}):Object(b.jsx)(j,{onLoginDone:this.changeLoggedInState});return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(c.a,{ref:this.Cognito,"cognito-region":"eu-central-1","cognito-pool-id":"eu-central-1_iBzUxlCpJ","cognito-client-id":"5lrklc6frlg4sik3dnr0koq70h","storage-type":"local"}),e]})}}]),n}(r.Component);Object(s.setupConfig)({videoproxyURL:"wss://video-broker.larva.io/"}),i.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("app"))}},[[47,8,10]]]);
//# sourceMappingURL=main.53a4a58f.chunk.js.map