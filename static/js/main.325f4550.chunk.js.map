{"version":3,"sources":["../node_modules/@larva.io/webcomponents/dist/esm lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/@larva.io/webcomponents/dist/collection/components/internal/icon/assets/svg lazy-once /^/.//.*/.svg$/ groupOptions: {} namespace object","Login.jsx","Device.jsx","App.jsx","index.jsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","webpackAsyncContextResolve","Login","props","state","loading","username","password","device","handleUsernameChange","bind","handlePasswordChange","handleSubmit","event","this","setState","target","value","a","preventDefault","request","res","access_token","onLoginDone","alert","message","Loading","onSubmit","type","onChange","disabled","Component","DeviceComponent","closed","nodes","deviceClosed","createReactComponent","addEventListener","handleBroadcast","open","getUINodes","removeEventListener","node","ui","component","React","createElement","color","colorInputs","colorModal","mainTitle","name","supTitle","room","subTitle","category","icon","nodeId","key","log","onOutput","handleNodeOutput","onRequest","handleNodeRequest","Closed","nodesWithComponents","filter","visible","sort","b","parseInt","rating","item","componentName","pascalize","Components","console","error","dynamicComponents","favorite","dynamicFavoriteComponents","className","s","replace","x","toUpperCase","charAt","detail","evt","payload","document","querySelector","input","data","App","token","loggedIn","opened","logout","setToken","getToken","CloudDevice","server","timeout","catch","err","SubComponent","onClick","setupConfig","videoproxyURL","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.325f4550.chunk.js","sourcesContent":["var map = {\n\t\"./lar-analog-value.entry.js\": [\n\t\t42,\n\t\t25\n\t],\n\t\"./lar-app.entry.js\": [\n\t\t43,\n\t\t26\n\t],\n\t\"./lar-area-troubles.entry.js\": [\n\t\t44,\n\t\t0,\n\t\t1,\n\t\t4,\n\t\t3,\n\t\t16\n\t],\n\t\"./lar-area.entry.js\": [\n\t\t45,\n\t\t0,\n\t\t1,\n\t\t3,\n\t\t14\n\t],\n\t\"./lar-backdrop_14.entry.js\": [\n\t\t46,\n\t\t0,\n\t\t1,\n\t\t4,\n\t\t3,\n\t\t12\n\t],\n\t\"./lar-button-push.entry.js\": [\n\t\t47,\n\t\t27\n\t],\n\t\"./lar-debug.entry.js\": [\n\t\t48,\n\t\t28\n\t],\n\t\"./lar-door.entry.js\": [\n\t\t49,\n\t\t29\n\t],\n\t\"./lar-inner-range-area.entry.js\": [\n\t\t50,\n\t\t30\n\t],\n\t\"./lar-inner-range-door.entry.js\": [\n\t\t51,\n\t\t31\n\t],\n\t\"./lar-onoff.entry.js\": [\n\t\t52,\n\t\t32\n\t],\n\t\"./lar-push-button.entry.js\": [\n\t\t53,\n\t\t33\n\t],\n\t\"./lar-radio-button.entry.js\": [\n\t\t54,\n\t\t15\n\t],\n\t\"./lar-range.entry.js\": [\n\t\t55,\n\t\t34\n\t],\n\t\"./lar-rtsp-h264-mjpeg.entry.js\": [\n\t\t126,\n\t\t11\n\t],\n\t\"./lar-slider.entry.js\": [\n\t\t56,\n\t\t22\n\t],\n\t\"./lar-sliding-door.entry.js\": [\n\t\t57,\n\t\t0,\n\t\t13\n\t],\n\t\"./lar-toggle.entry.js\": [\n\t\t58,\n\t\t19\n\t],\n\t\"./lar-two-pos-controller.entry.js\": [\n\t\t59,\n\t\t17\n\t],\n\t\"./lar-utility-log.entry.js\": [\n\t\t60,\n\t\t0,\n\t\t1,\n\t\t23\n\t],\n\t\"./lar-utility-meter.entry.js\": [\n\t\t61,\n\t\t0,\n\t\t1,\n\t\t4,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 35;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./24h non-burgular.svg\": 62,\n\t\"./airflow.svg\": 63,\n\t\"./alarm.svg\": 64,\n\t\"./back.svg\": 65,\n\t\"./barrier.svg\": 66,\n\t\"./carbonmonoxide.svg\": 67,\n\t\"./chart-bar.svg\": 68,\n\t\"./chart-bar2.svg\": 69,\n\t\"./check.svg\": 70,\n\t\"./cloud.svg\": 71,\n\t\"./combustion.svg\": 72,\n\t\"./device.svg\": 73,\n\t\"./door.svg\": 74,\n\t\"./dot-circle.svg\": 75,\n\t\"./down.svg\": 76,\n\t\"./electricity.svg\": 77,\n\t\"./fail to report in.svg\": 78,\n\t\"./fire.svg\": 79,\n\t\"./fire_alarm.svg\": 80,\n\t\"./flame.svg\": 81,\n\t\"./foil.svg\": 82,\n\t\"./gas.svg\": 83,\n\t\"./glass.svg\": 84,\n\t\"./halflock.svg\": 85,\n\t\"./halflock_trouble.svg\": 86,\n\t\"./hight temp.svg\": 87,\n\t\"./info.svg\": 88,\n\t\"./intruder_alarm.svg\": 89,\n\t\"./loading.svg\": 90,\n\t\"./lock.svg\": 91,\n\t\"./lock2.svg\": 92,\n\t\"./lock_trouble.svg\": 93,\n\t\"./log.svg\": 94,\n\t\"./low temp.svg\": 95,\n\t\"./medical.svg\": 96,\n\t\"./medical_alarm.svg\": 97,\n\t\"./movement.svg\": 98,\n\t\"./moving-cogs.svg\": 99,\n\t\"./off.svg\": 100,\n\t\"./on.svg\": 101,\n\t\"./other_alarm.svg\": 102,\n\t\"./panic.svg\": 103,\n\t\"./panic_alarm.svg\": 104,\n\t\"./perimeter.svg\": 105,\n\t\"./personal emergency.svg\": 106,\n\t\"./refrigeration.svg\": 107,\n\t\"./security.svg\": 108,\n\t\"./security2.svg\": 109,\n\t\"./services.svg\": 110,\n\t\"./sliding-door.svg\": 111,\n\t\"./smoke.svg\": 112,\n\t\"./solid-circle.svg\": 113,\n\t\"./sound.svg\": 114,\n\t\"./tank level.svg\": 115,\n\t\"./temperature.svg\": 116,\n\t\"./unlock.svg\": 117,\n\t\"./unlock2.svg\": 118,\n\t\"./user.svg\": 119,\n\t\"./users.svg\": 120,\n\t\"./vibration.svg\": 121,\n\t\"./warning.svg\": 122,\n\t\"./water.svg\": 123,\n\t\"./water2.svg\": 124,\n\t\"./window.svg\": 125\n};\n\n\nfunction webpackAsyncContext(req) {\n\treturn webpackAsyncContextResolve(req).then(__webpack_require__);\n}\nfunction webpackAsyncContextResolve(req) {\n\treturn __webpack_require__.e(/* lazy-once context */ 9).then(function() {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\t\treturn map[req];\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.resolve = webpackAsyncContextResolve;\nwebpackAsyncContext.id = 37;\nmodule.exports = webpackAsyncContext;","/* eslint-disable react/destructuring-assignment */\n/* eslint-disable no-alert */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Device } from '@larva.io/clouddevice';\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      username: '',\n      password: '',\n    };\n    // eslint-disable-next-line react/destructuring-assignment\n    this.device = this.props.device;\n    this.handleUsernameChange = this.handleUsernameChange.bind(this);\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleUsernameChange(event) {\n    this.setState({\n      username: event.target.value,\n    });\n  }\n\n  handlePasswordChange(event) {\n    this.setState({\n      password: event.target.value,\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      loading: true,\n    });\n    try {\n      // console.warn('####', await this.device.request('iot-2/cmd/getUnits/fmt/json'));\n      // https://docs.larva.io/base/users\n      const res = await this.device.request('iot-2/cmd/login/fmt/json', {\n        username: this.state.username,\n        password: this.state.password,\n      });\n      if (!res.access_token) {\n        throw new Error('Invalid login response');\n      }\n      this.props.onLoginDone(res.access_token);\n    } catch (err) {\n      alert(`Login Error: ${err.message}`);\n    } finally {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    const { loading } = this.state;\n    const Loading = loading ? <div>Loading...</div> : <span />;\n    return (\n      <div>\n        {Loading}\n        <form onSubmit={this.handleSubmit}>\n          Username:\n          <input type=\"text\" value={this.state.username} onChange={this.handleUsernameChange} />\n          <br />\n          Paassword:\n          <input type=\"password\" value={this.state.password} onChange={this.handlePasswordChange} />\n          <br />\n          <button disabled={this.state.loading} type=\"submit\">Login</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  onLoginDone: PropTypes.func.isRequired,\n  device: PropTypes.instanceOf(Device).isRequired,\n};\n","/* eslint-disable no-console */\n/* eslint-disable no-alert */\nimport React, { Component } from 'react';\nimport { Device } from '@larva.io/clouddevice';\nimport PropTypes from 'prop-types';\nimport * as Components from '@larva.io/webcomponents-react';\n\nexport default class DeviceComponent extends Component {\n  // component names are kebab-case, React Components are PascalCase\n  static pascalize(s) {\n    const name = s.replace(/-./g, (x) => x.toUpperCase()[1]);\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  }\n\n  // device broadcast messages handler\n  static async handleBroadcast(event /* @typeof CustomEvent */) {\n    const detail = event && event.detail ? event.detail : {};\n    const nodeId = detail.evt;\n    const payload = detail.payload || {};\n    if (!nodeId) {\n      return;\n    }\n    // if we have lava node loaded to dom with this node id\n    const node = document.querySelector(`*[node-id='${nodeId}']`);\n    if (node) {\n      node.input(payload.data);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      closed: false,\n      nodes: [],\n    };\n    // eslint-disable-next-line react/destructuring-assignment\n    this.device = this.props.device;\n    this.deviceClosed = this.deviceClosed.bind(this);\n    this.createReactComponent = this.createReactComponent.bind(this);\n    // handle broadcasted changes\n    this.device.addEventListener('broadcast', DeviceComponent.handleBroadcast);\n    this.device.addEventListener('close', this.deviceClosed);\n  }\n\n  async componentDidMount() {\n    try {\n      // connect to device\n      await this.device.open();\n      const nodes = await this.device.getUINodes();\n      this.setState({\n        nodes,\n        closed: false,\n        loading: false,\n      });\n    } catch (err) {\n      alert(`Failed to connect to device: ${err.message}`);\n    }\n  }\n\n  async componentWillUnmount() {\n    this.device.removeEventListener('broadcast', DeviceComponent.handleBroadcast);\n    this.device.removeEventListener('close', this.deviceClosed);\n  }\n\n  async deviceClosed() {\n    this.setState({\n      loading: false,\n      closed: true,\n      nodes: [],\n    });\n  }\n\n  createReactComponent(node) {\n    if (!node || !node.ui || !node.node || !node.component) {\n      throw new Error('Invalid node object');\n    }\n    return React.createElement(node.component, {\n      color: 'primary',\n      colorInputs: 'primary',\n      colorModal: 'primary',\n      mainTitle: node.ui.name,\n      supTitle: node.ui.room ? node.ui.room.name : '',\n      subTitle: node.ui.category ? node.ui.category.name : '',\n      icon: node.ui.icon,\n      nodeId: node.node.id,\n      key: node.node.id,\n      log: node.ui.log,\n      onOutput: this.device.handleNodeOutput,\n      onRequest: this.device.handleNodeRequest,\n    });\n  }\n\n  render() {\n    const { loading, nodes, closed } = this.state;\n    const Loading = loading ? <div>Loading...</div> : <span />;\n    const Closed = closed ? <div>Device connection closed</div> : <span />;\n    // load WebComponents from getUINodes response\n    const nodesWithComponents = nodes\n      // filter nodes that should be visible\n      .filter((e) => !!e.ui.visible)\n      // sort by rating\n      .sort((a, b) => parseInt(b.ui.rating, 10) - parseInt(a.ui.rating, 10))\n      .map((item) => {\n        const componentName = DeviceComponent.pascalize(item.node.type);\n        if (typeof Components[componentName] === 'undefined') {\n          console.error(`Cannot find Larva.io WebComonent for ${componentName}`);\n          return item;\n        }\n        return { ...item, component: Components[componentName] };\n      })\n      // filter nodes that doesnt have WebComponent\n      .filter((e) => !!e.component);\n\n    // wrap it up, set props and event listeners\n    const dynamicComponents = nodesWithComponents\n      .filter((e) => !e.ui.favorite)\n      .map(this.createReactComponent);\n\n    const dynamicFavoriteComponents = nodesWithComponents\n      .filter((e) => !!e.ui.favorite)\n      .map(this.createReactComponent);\n\n    return (\n      <div>\n        {Loading}\n        {Closed}\n        <Components.LarApp>\n          <div className=\"favorites-grid\">\n            {dynamicFavoriteComponents}\n          </div>\n          <div className=\"grid\">\n            {dynamicComponents}\n          </div>\n        </Components.LarApp>\n      </div>\n    );\n  }\n}\n\nDeviceComponent.propTypes = {\n  device: PropTypes.instanceOf(Device).isRequired,\n};\n","/* eslint-disable react/destructuring-assignment */\nimport './App.css';\nimport { Component } from 'react';\nimport { Device as CloudDevice } from '@larva.io/clouddevice';\nimport Login from './Login';\nimport Device from './Device';\n\nconst DEVICE_ID = '76696365-733a-5465-7374-446576696365';\nconst UNIT_ID = '00000000-0000-0000-0000-000000000000';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.token = '';\n    this.state = {\n      loggedIn: false,\n      opened: false,\n    };\n    this.logout = this.logout.bind(this);\n    this.setToken = this.setToken.bind(this);\n    this.setToken = this.setToken.bind(this);\n    this.getToken = this.getToken.bind(this);\n    this.device = new CloudDevice(DEVICE_ID, UNIT_ID, this.getToken, {\n      server: 'wss://broker.larva.io',\n      timeout: 8000,\n    });\n  }\n\n  async componentDidMount() {\n    await this.device.open()\n      // eslint-disable-next-line no-alert\n      .catch((err) => alert(err.message));\n    this.setToken();\n    this.setState({\n      opened: true,\n    });\n  }\n\n  getToken() {\n    return this.token;\n  }\n\n  setToken(token) {\n    this.token = token;\n    this.setState({\n      loggedIn: !!this.token,\n    });\n  }\n\n  logout() {\n    this.setToken('');\n  }\n\n  render() {\n    const { loggedIn } = this.state;\n    const SubComponent = loggedIn\n      ? (\n        <div>\n          <button type=\"button\" onClick={this.logout}>Logout</button>\n          <Device device={this.device} />\n        </div>\n      )\n      : <Login device={this.device} onLoginDone={this.setToken} />;\n    return (\n      <div className=\"App\">\n        {!this.state.opened && <span>Opening connection to broker....</span>}\n        {this.state.opened && SubComponent}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { setupConfig } from '@larva.io/webcomponents-react';\nimport App from './App';\n\nsetupConfig({\n  videoproxyURL: 'wss://video-broker.larva.io/',\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('app'),\n);\n"],"sourceRoot":""}