(this["webpackJsonplarvaio-cloud-device-react-demo"]=this["webpackJsonplarvaio-cloud-device-react-demo"]||[]).push([[14],{137:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var o=r(136);function n(t,e,r){"__proto__"==e&&o.a?Object(o.a)(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},142:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var o=r(132),n=Object.prototype.hasOwnProperty;function a(t,e){return null!=t&&n.call(t,e)}function i(t,e){return null!=t&&Object(o.f)(t,e,a)}},143:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var o=r(129),n=r(132),a=r(134);function i(t,e){return(Object(o.a)(t)?n.a:a.e)(t,Object(a.b)(e))}},147:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return h}));var o=r(141),n=r(131),a=r(130),i=r(133),l=r(134);function s(t,e){return t&&Object(l.f)(t,"function"==typeof(r=e)?r:l.h);var r}function c(t,e,r){if(!Object(n.a)(r))return!1;var o=typeof e;return!!("number"==o?Object(i.k)(r)&&Object(a.i)(e,r.length):"string"==o&&e in r)&&Object(a.g)(r[e],t)}var u,d,h=(u=function(t,e){if(null==t)return[];var r=e.length;return r>1&&c(t,e[0],e[1])?e=[]:r>2&&c(e[0],e[1],e[2])&&(e=[e[0]]),Object(o.c)(t,Object(o.b)(e,1),[])},Object(o.f)(Object(o.e)(u,d,l.h),u+""))},45:function(t,e,r){"use strict";r.r(e),r.d(e,"lar_area",(function(){return Z}));var o=r(0),n=r.n(o),a=r(2),i=r(4),l=r(5),s=r(22),c=(r(139),r(141)),u=r(142),d=r(129),h=(r(128),r(132),r(131),r(130),r(133)),b=r(134),g=r(143),p=r(147),m=(r(136),r(137));function f(t){return t!==t}function v(t,e){return!!(null==t?0:t.length)&&function(t,e,r){return e===e?function(t,e,r){for(var o=r-1,n=t.length;++o<n;)if(t[o]===e)return o;return-1}(t,e,r):function(t,e,r,o){for(var n=t.length,a=r+(o?1:-1);o?a--:++a<n;)if(e(t[a],a,t))return a;return-1}(t,f,r)}(t,e,0)>-1}function y(t,e,r){for(var o=-1,n=null==t?0:t.length;++o<n;)if(r(e,t[o]))return!0;return!1}var O=h.a&&1/Object(b.i)(new h.a([,-0]))[1]==1/0?function(t){return new h.a(t)}:function(){};function j(t){return t&&t.length?function(t,e,r){var o=-1,n=v,a=t.length,i=!0,l=[],s=l;if(r)i=!1,n=y;else if(a>=200){var c=e?null:O(t);if(c)return Object(b.i)(c);i=!1,n=b.d,s=new b.a}else s=e?[]:l;t:for(;++o<a;){var u=t[o],d=e?e(u):u;if(u=r||0!==u?u:0,i&&d===d){for(var h=s.length;h--;)if(s[h]===d)continue t;e&&s.push(d),l.push(u)}else n(s,d,r)||(s!==l&&s.push(d),l.push(u))}return l}(t):[]}function k(t,e,r,o){for(var n=-1,a=null==t?0:t.length;++n<a;){var i=t[n];e(o,i,r(i),t)}return o}function z(t,e,r,o){return Object(b.c)(t,(function(t,n,a){e(o,t,r(t),a)})),o}var w,A,_=Object.prototype.hasOwnProperty,T=(w=function(t,e,r){_.call(t,r)?t[r].push(e):Object(m.a)(t,r,[e])},function(t,e){var r=Object(d.a)(t)?k:z,o=A?A():{};return r(t,w,Object(b.b)(e),o)}),Z=function(){function t(e){Object(i.a)(this,t),Object(s.i)(this,e),this.output=Object(s.d)(this,"output",7),this.request=Object(s.d)(this,"request",7),this.icon="security",this.color="primary",this.allowIndicationAutoColoring=!1,this.allowNodeAutoColoring=!0,this.enableSecurityQuickActions=!1,this.log=!1,this.zones=[],this.bypassZones=[],this.armed=!1,this.overrideTroubles=!1,this.zoneopened=!1,this.exitDelayActive=!1,this.entryDelayActive=!1,this.transactionDelay=0,this.alarm=!1,this.troubles=[],this.loading=!0}return Object(l.a)(t,[{key:"input",value:function(){var t=Object(a.a)(n.a.mark((function t(e){var r,o,a,i,l,s,c,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validateData(e)){t.next=2;break}return t.abrupt("return");case 2:this.armed=!!(null===(r=e.state)||void 0===r?void 0:r.armed),this.exitDelayActive=!!(null===(o=e.state)||void 0===o?void 0:o.exit_delay_active),this.entryDelayActive=!!(null===(a=e.state)||void 0===a?void 0:a.entry_delay_active),(this.exitDelayActive||this.entryDelayActive)&&(this.transactionDelay=this.exitDelayActive?null===(i=e.state)||void 0===i?void 0:i.exit_delay_expires_in_seconds:null===(l=e.state)||void 0===l?void 0:l.entry_delay_expires_in_seconds,this.transactionDelay=this.transactionDelay||0,this.transactionDelay=Math.round(this.transactionDelay)),this.alarm=!!(null===(s=e.state)||void 0===s?void 0:s.alarm),this.troubles=Array.isArray(null===(c=e.state)||void 0===c?void 0:c.troubles)?null===(u=e.state)||void 0===u?void 0:u.troubles:[],this.troubles=this.troubles.filter((function(t){return null===t.acked||void 0===t.acked})),this.zones=Array.isArray(e.zones)?e.zones:[],this.zoneopened=!!this.zones.find((function(t){return"open"===t.state})),0===this.troubles.length&&this.hideModal("#troublesmodal"),this.loading=!1;case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"error",value:function(){var t=Object(a.a)(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.node&&this.node.error(e),this.loading=!1;case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidLoad",value:function(){var t=this.el.shadowRoot||this.el;this.node=t.querySelector("lar-node"),this.output.emit()}},{key:"validateData",value:function(t){return!!(Object(u.a)(t,"id")&&Object(u.a)(t,"state")&&Object(u.a)(t,"state.armed"))||(Object(u.a)(t,"success")||console.error("Area Invalid input message",t),!1)}},{key:"arm",value:function(){return this.loading=!0,this.output.emit({command:"arm"})}},{key:"partialarm",value:function(){this.loading=!0,this.output.emit({command:"arm",override_zones:this.bypassZones,override_troubles:this.overrideTroubles}),this.hideModal("#bypassoverridemodal")}},{key:"disarm",value:function(){this.loading=!0,this.output.emit({command:"disarm"})}},{key:"showModal",value:function(t){(this.el.shadowRoot||this.el).querySelector(t).present()}},{key:"hideModal",value:function(t){(this.el.shadowRoot||this.el).querySelector(t).dismiss()}},{key:"togglePyPassZone",value:function(t){var e=this.bypassZones.indexOf(t.id);e>-1?this.bypassZones.splice(e,1):this.bypassZones.push(t.id),Object(s.e)(this.el)}},{key:"bypassAutoSelect",value:function(t,e){var r=this;void 0!==t&&null!==t&&""!==t||e?this.zones.forEach((function(o){o.persistent||!e||"open_circuit"!==o.state&&"short_circuit"!==o.state||r.isZoneByPassed(o)||r.togglePyPassZone(o),o.persistent||o.group!==t||r.isZoneByPassed(o)||r.togglePyPassZone(o)})):this.bypassZones=[]}},{key:"isZoneByPassed",value:function(t){return this.bypassZones.indexOf(t.id)>-1}},{key:"renderZoneSelector",value:function(){var t=this,e=[];this.troubles.length>0&&e.push(Object(s.g)("lar-button",{onClick:function(){return t.bypassAutoSelect("",!0)},color:"danger",size:"small",class:"zone-group",expand:"block",outline:!0},Object(s.g)("lar-translate",{t:"area.faultedOrTampered"})));var r=this.zones.filter((function(t){return!t.persistent&&""!==t.group}));return j(Object(g.a)(r,"group")).forEach((function(r){null!==r&&void 0!==r&&e.push(Object(s.g)("lar-button",{color:t.colorInputs||t.color,onClick:function(){return t.bypassAutoSelect(r)},size:"small",expand:"block",class:"zone-group",outline:!0},Object(s.g)("lar-translate",{t:r||"<no name>"})))})),e.push(Object(s.g)("lar-button",{color:"warning",onClick:function(){return t.bypassAutoSelect()},size:"small",class:"zone-group",expand:"block",outline:!0},Object(s.g)("lar-translate",{t:"area.clearSelection"}))),e}},{key:"renderZones",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=[],o=Object(p.b)(this.zones,"group"),n=T(o,"group");return Object(p.a)(n,(function(o,n){r.push(Object(s.g)("lar-list-header",null,Object(s.g)("lar-translate",{t:n}))),(o=Object(p.b)(o,"name")).forEach((function(o){if(!e||!o.persistent||"closed"!==o.state){var n="success";"open"===o.state&&(n="tertiary"),"short_circuit"===o.state&&(n="warning"),"open_circuit"===o.state&&(n="danger"),r.push(Object(s.g)("lar-list-item",{style:e?{cursor:"pointer"}:{},disabled:e&&t.isZoneByPassed(o),onClick:function(){e&&t.togglePyPassZone(o)}},Object(s.g)("div",{slot:"start",class:"circle"},Object(s.g)("lar-icon",{icon:o.type,color:n})),Object(s.g)("div",null,Object(s.g)("h4",null,Object(s.g)("lar-translate",{t:o.name})),e&&t.isZoneByPassed(o)?Object(s.g)("lar-badge",{color:"danger"},Object(s.g)("lar-translate",{t:"area.zone_state.bypass"})):Object(s.g)("lar-badge",{color:n},Object(s.g)("lar-translate",{t:"area.zone_state."+o.state})),o.overridden&&Object(s.g)("span",null,"\xa0",Object(s.g)("lar-badge",{color:"danger"},Object(s.g)("lar-translate",{t:"area.zone_state.bypassed"}))))))}}))})),r}},{key:"render",value:function(){var t=this,e="area.disarmed",r="unlock",o=this.colorIconSmall;if(void 0!==this.transactionDelayTimeout&&(clearTimeout(this.transactionDelayTimeout),this.transactionDelayTimeout=void 0),this.armed){var n=!!this.zones.find((function(t){return!0===t.overridden})),a=!!this.troubles.find((function(t){return!0===t.overridden}));n&&a?(e="area.partalArmedWithTrouble",r="halflock_trouble"):a?(e="area.armedWithTouble",r="lock_trouble"):n?(e="area.partalArmed",r="halflock"):(e="area.armed",r="lock"),!!this.troubles.find((function(t){return!t.overridden}))&&(r="warning")}if(this.troubles.length>0&&!this.armed&&(r="warning"),(this.exitDelayActive||this.entryDelayActive)&&this.transactionDelay>0&&(e=this.exitDelayActive?"area.exitdelay":"area.entrydelay",this.valueTranslationValues={seconds:String(this.transactionDelay)},this.transactionDelayTimeout=window.setTimeout((function(){0===t.transactionDelay?clearTimeout(t.transactionDelayTimeout):t.transactionDelay--,Object(s.e)(t.el)}),1e3)),this.alarm){var i=[],l=this.troubles.filter((function(t){return""===t.resolved||null===t.resolved||void 0===t.resolved})),u=!!l.find((function(t){return 0===t.type_id})),d=l.filter((function(t){var e;return 3===t.type_id&&!!(null===(e=t.zone)||void 0===e?void 0:e.reportcode)})),h=!!d.find((function(t){var e;return c.a.isFireAlarm(null===(e=t.zone)||void 0===e?void 0:e.reportcode)})),b=!!d.find((function(t){var e;return c.a.isMedicalAlarm(null===(e=t.zone)||void 0===e?void 0:e.reportcode)})),g=!!d.find((function(t){var e;return c.a.isPanicAlarm(null===(e=t.zone)||void 0===e?void 0:e.reportcode)})),p=!!d.find((function(t){var e;return c.a.isOtherAreaAlarm(null===(e=t.zone)||void 0===e?void 0:e.reportcode)}));u&&i.push("intruder"),h&&i.push("fire"),b&&i.push("medical"),g&&i.push("panic"),p&&i.push("other"),0===i.length&&i.push("other"),e=i.length>1?"area.alarms.multiple":"area.alarms."+i[0],r=i.length>1?"alarm":i[0]+"_alarm"}if(this.allowIndicationAutoColoring&&this.alarm)o=!0===this.allowNodeAutoColoring?"light":"danger";else if(this.allowIndicationAutoColoring)switch(r){case"halflock_trouble":case"lock_trouble":case"halflock":case"warning":o="warning";break;case"unlock":o="danger";break;case"lock":o="success"}return[Object(s.g)("lar-node",{value:e,hideTitles:this.hideTitles,valueTranslationValues:this.valueTranslationValues,iconSmall:r,icon:this.icon,colorIconSmall:o,color:this.alarm&&!0===this.allowNodeAutoColoring?"danger":this.color,supTitle:this.supTitle,mainTitle:this.mainTitle,subTitle:this.subTitle,colorModal:this.alarm&&!0===this.allowNodeAutoColoring?"danger":this.colorModal,colorInputs:this.colorInputs,log:this.log,loading:this.loading},!0===this.enableSecurityQuickActions&&Object(s.g)("lar-button-push",{size:"small",slot:"titles",color:this.colorInputs||this.color,disabled:this.loading||this.zoneopened&&!this.armed||this.troubles.length>0,onClick:function(e){return t.armed?t.disarm():t.arm()}}),Object(s.g)("div",{class:"actions"},this.armed||this.alarm?Object(s.g)("lar-button",{onClick:function(){return t.disarm()},color:this.colorInputs||this.color},Object(s.g)("lar-icon",{icon:"unlock"})," ",Object(s.g)("lar-translate",{t:"area.disarm"})):Object(s.g)("lar-button-group",null,Object(s.g)("lar-button",{disabled:this.zoneopened,onClick:function(){return t.troubles.length>0?t.showModal("#bypassoverridemodal"):t.arm()},color:this.colorInputs||this.color},Object(s.g)("lar-icon",{icon:"lock"})," ",Object(s.g)("lar-translate",{t:"area.arm"})),Object(s.g)("lar-button",{onClick:function(){return t.showModal("#bypassoverridemodal")},color:"dark"===this.colorInputs?"light":"dark"},Object(s.g)("lar-icon",{icon:"halflock"})," ",Object(s.g)("lar-translate",{t:"area.partialarm"})))),Object(s.g)("div",{class:"details"},Object(s.g)("lar-button-group",null,this.troubles.length>0&&Object(s.g)("lar-button",{color:"warning",size:"small",expand:"block",outline:!0,onClick:function(){return t.showModal("#troublesmodal")}},Object(s.g)("lar-icon",{icon:"warning"}),"\xa0",Object(s.g)("lar-translate",{t:"area.troubles"})),Object(s.g)("lar-button",{color:this.colorInputs||this.color,size:"small",expand:"block",outline:!0,onClick:function(){return t.showModal("#zonemodal")}},Object(s.g)("lar-translate",{t:"area.zonemonitor"}),"\xa0",this.zoneopened?Object(s.g)("lar-icon",{icon:"unlock"}):Object(s.g)("lar-icon",{icon:"lock"}))))),Object(s.g)("lar-modal",{mainTitle:"area.zonemonitor",id:"zonemodal",animation:"bottom",colorHeaderInputs:this.colorInputs,color:this.colorModal||this.color,icon:this.icon,iconSmall:this.loading?"loading":"",headerSize:"small"},Object(s.g)("lar-list",{class:"zone-list"},this.renderZones())),Object(s.g)("lar-modal",{mainTitle:this.troubles.length>0?"area.overrideAndBypass":"area.partialarm",subTitle:"area.selectZonesToBypass",id:"bypassoverridemodal",animation:"bottom",colorHeaderInputs:this.colorInputs,color:this.colorModal||this.color,icon:this.icon,iconSmall:this.loading?"loading":"",headerSize:"small",onLarModalWillPresent:function(){t.bypassZones=[],t.troubles.length>0&&(t.overrideTroubles=!0)},onLarModalDidDismiss:function(){t.overrideTroubles=!1}},Object(s.g)("div",{class:"spacer"}),this.troubles.length>0?Object(s.g)("h4",null,Object(s.g)("lar-translate",{t:"area.overrideTroblesZonesInfo",values:{troubles:this.troubles.length>0?this.troubles.length:"0",zones:this.bypassZones.length>0?this.bypassZones.length:"0"}})):Object(s.g)("h4",null,Object(s.g)("lar-translate",{t:"area.overrideZonesInfo",values:{zones:this.bypassZones.length>0?this.bypassZones.length:"0"}})),Object(s.g)("div",{class:"spacer"}),Object(s.g)("lar-button",{onClick:function(){return t.partialarm()},color:this.colorInputs||this.color},Object(s.g)("lar-icon",{icon:this.bypassZones.length>0?"halflock":"lock"}),"\xa0",Object(s.g)("lar-translate",{t:this.troubles.length>0?this.bypassZones.length>0?"area.overridePartialArm":"area.overridearm":this.bypassZones.length>0?"area.partialarm":"area.arm"})),Object(s.g)("div",{class:"spacer"}),Object(s.g)("div",{class:"zone-selectors"},this.renderZoneSelector()),Object(s.g)("lar-list",{class:"zone-list"},this.renderZones(!0))),Object(s.g)("lar-modal",{mainTitle:"area.troubles",id:"troublesmodal",animation:"bottom",colorHeaderInputs:this.colorInputs,color:this.colorModal||this.color,icon:this.icon,iconSmall:this.loading?"loading":"",headerSize:"small"},Object(s.g)("lar-area-troubles",{troubles:this.troubles,colorInputs:this.colorInputs||this.color}))]}},{key:"el",get:function(){return Object(s.f)(this)}}]),t}();Z.style=".details{padding:3rem 0 0 0}.details lar-button-group{-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.actions{min-height:60px}lar-list-item{background-color:var(--lar-background-color-step-100, #1a1a1a) !important;color:var(--lar-text-color, #fff) !important}.spacer{margin-top:1.5rem;margin-bottom:1.5rem}.circle{background-color:var(--lar-background-color-step-200, #333333) !important;border-radius:50%;display:inline-block;padding:0.5rem;width:2rem;height:2rem;margin-right:1rem}.circle lar-icon{display:block;width:100%;height:100%}.zone-list h4{margin:0;padding:0}.zone-list h4 lar-badge{margin-top:0.2rem;margin-right:0.3rem;font-weight:normal}.zone-selectors{text-align:center;margin-bottom:1rem}.zone-selectors lar-button{margin:0.2rem}.zone-list lar-badge{margin-top:0.3rem}lar-button.zone-group{--lar-button-font-size-small:.95rem;--lar-button-padding-top-small:.4rem;--lar-button-padding-bottom-small:.4rem;--lar-button-padding-left-small:.4rem;--lar-button-padding-right-small:.4rem}"}}]);
//# sourceMappingURL=14.68e13bb4.chunk.js.map