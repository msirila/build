(this["webpackJsonplarvaio-cloud-device-react-demo"]=this["webpackJsonplarvaio-cloud-device-react-demo"]||[]).push([[23],{137:function(t,e,r){"use strict";r.r(e),r.d(e,"lar_cognito_password_recovery",(function(){return l})),r.d(e,"lar_cognito_radio",(function(){return d}));var n=r(0),a=r.n(n),s=r(1),i=r(6),o=r(7),c=r(25),u=r(187),h=r(188),l=function(){function t(e){Object(i.a)(this,t),Object(c.h)(this,e),this.back=Object(c.d)(this,"back",7),this.recoveryDone=Object(c.d)(this,"recoveryDone",7),this.recoveryError=Object(c.d)(this,"recoveryError",7),this.loading=Object(c.d)(this,"loading",7),this.showBack=!1,this.backText="Back",this.continueText="Continue",this.changeText="Change",this.newPasswordText="New Password",this.confirmPasswordText="Confirm Password",this.passwordText="Password",this.usernameText="Username",this.codeText="Code",this.enterCoreText="Please enter code and new password. Code sent to:",this.submitButtonColor="primary",this.backButtonColor="dark",this.cognitoUsernameAttribute="any",this.disableUsername=!1,this.state=h.a.PASSWORD_RECOVERY_USERNAME,this.loadingState=!1}return Object(o.a)(t,[{key:"updateUsername",value:function(t){t&&(this.usernameInternal=t)}},{key:"componentWillLoad",value:function(){var t=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.username&&(this.usernameInternal=this.username);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isLoading",value:function(){var t=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.loadingState);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setLoading",value:function(t){this.loadingState=t,this.loading.emit(t)}},{key:"startRecovery",value:function(){var t=Object(s.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setLoading(!0),t.next=4,u.a.forgotPassword(this.usernameInternal);case 4:if(!(e=t.sent)||!e.CodeDeliveryDetails){t.next=11;break}this.deliveryMedium=e.CodeDeliveryDetails.DeliveryMedium,this.destination=e.CodeDeliveryDetails.Destination,this.state=h.a.PASSWORD_RECOVERY_PASSWORD,t.next=12;break;case 11:throw new Error("Invalid response");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),this.recoveryError.emit(t.t0.message);case 17:return t.prev=17,this.setLoading(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[0,14,17,20]])})));return function(){return t.apply(this,arguments)}}()},{key:"finishRecovery",value:function(){var t=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.setLoading(!0),this.passwordFirst===this.passwordSecond){t.next=4;break}throw new Error("Passwords don't match");case 4:return t.next=6,u.a.forgotPasswordSubmit(this.usernameInternal,this.recoveryCode,this.passwordFirst);case 6:return t.next=8,this.login();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),this.recoveryError.emit(t.t0.message);case 13:return t.prev=13,this.setLoading(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[0,10,13,16]])})));return function(){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.setLoading(!0),this.usernameInternal&&this.passwordFirst){t.next=5;break}return this.recoveryError.emit("Incorrect usernameInternal or password"),t.abrupt("return");case 5:return t.next=7,u.a.signIn(this.usernameInternal,this.passwordFirst);case 7:this.recoveryDone.emit(this.usernameInternal),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),this.recoveryError.emit(t.t0.message);case 13:return t.prev=13,this.setLoading(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[0,10,13,16]])})));return function(){return t.apply(this,arguments)}}()},{key:"changeState",value:function(t){this.state=t}},{key:"renderState",value:function(){var t=this;switch(this.state){case h.a.PASSWORD_RECOVERY_USERNAME:return Object(c.f)("form",{onSubmit:function(){var e=Object(s.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t.startRecovery();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Object(c.f)("lar-cognito-username-input",{label:this.usernameText,type:this.cognitoUsernameAttribute,value:this.usernameInternal,disabled:this.disableUsername,onUsernameInput:function(e){t.usernameInternal=e.target.value}}),this.showBack?Object(c.f)("lar-cognito-button",{type:"button",color:this.backButtonColor,onClick:function(e){return t.back.emit(e)}},this.backText):void 0,Object(c.f)("lar-cognito-button",{type:"submit",color:this.submitButtonColor,disabled:this.loadingState||!this.usernameInternal},this.continueText));case h.a.PASSWORD_RECOVERY_PASSWORD:return Object(c.f)("form",{onSubmit:function(){var e=Object(s.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,t.finishRecovery();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Object(c.f)("p",null,this.enterCoreText," ",this.destination," (",this.deliveryMedium,")"),Object(c.f)("lar-cognito-input",{label:this.codeText,type:"text",value:this.recoveryCode,onInput:function(e){return t.recoveryCode=e.target.value}}),Object(c.f)("lar-cognito-input",{type:"password",label:this.newPasswordText,autocomplete:"new-password",value:this.passwordFirst,onInput:function(e){return t.passwordFirst=e.target.value}}),Object(c.f)("lar-cognito-input",{type:"password",label:this.confirmPasswordText,autocomplete:"new-password",value:this.passwordSecond,onInput:function(e){return t.passwordSecond=e.target.value}}),Object(c.f)("lar-cognito-button",{type:"button",color:this.backButtonColor,onClick:function(){return t.changeState(h.a.PASSWORD_RECOVERY_USERNAME)}},this.backText),Object(c.f)("lar-cognito-button",{type:"submit",color:this.submitButtonColor,disabled:this.loadingState||!this.recoveryCode||!this.passwordFirst||!this.passwordSecond},this.changeText));default:return Object(c.f)("div",null,"No state")}}},{key:"render",value:function(){return Object(c.f)("div",null,this.renderState())}}],[{key:"watchers",get:function(){return{username:["updateUsername"]}}}]),t}();l.style="lar-cognito-button.sc-lar-cognito-password-recovery:first-of-type{display:block;margin-top:1rem}p.sc-lar-cognito-password-recovery{text-align:center}";var d=function(){function t(e){Object(i.a)(this,t),Object(c.h)(this,e)}return Object(o.a)(t,[{key:"render",value:function(){var t=this.el.getAttribute("id")?this.el.getAttribute("id"):"lar-id-".concat(Math.random().toString(36).substring(8));return Object(c.f)("div",{class:"default"},Object(c.f)("input",{id:t,type:"radio",checked:this.checked,disabled:this.disabled,value:this.value}),Object(c.f)("label",{for:t},this.label))}},{key:"el",get:function(){return Object(c.e)(this)}}]),t}();d.style=".default.sc-lar-cognito-radio,.default.sc-lar-cognito-radio label.sc-lar-cognito-radio{margin-left:0.2rem}.default.sc-lar-cognito-radio label.sc-lar-cognito-radio{margin-left:0.2rem}"},188:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t[t.PASSWORD_RECOVERY_USERNAME=0]="PASSWORD_RECOVERY_USERNAME",t[t.PASSWORD_RECOVERY_PASSWORD=1]="PASSWORD_RECOVERY_PASSWORD",t[t.USER_LOGIN=2]="USER_LOGIN",t[t.NEW_PASSWORD=3]="NEW_PASSWORD",t[t.MFA=4]="MFA",t[t.VERIFICATION=5]="VERIFICATION",t[t.VERIFICATION_CODE=6]="VERIFICATION_CODE"}(n||(n={}))}}]);
//# sourceMappingURL=23.f710f022.chunk.js.map